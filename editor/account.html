<!DOCTYPE html>
<html>
  <head>
    <title>My Account - DragonDrop</title>
    <link rel="stylesheet" href="https://dragon-drop-scratch.github.io/html-app/assets/css/main.css">
    <link rel="stylesheet" href="https://dragon-drop-scratch.github.io/html-app/assets/css/account.css">
    <link rel="stylesheet" type="text/css" href="https://dragon-drop-scratch.github.io/prototype/dist/sweetalert.css">
    <script async src="https://dragon-drop-scratch.github.io/prototype/dist/sweetalert.min.js"></script>
    <script async>
      function changeEmail() {
        var password = "this-is-a-pass"; // Just for now. When backend is implemented, it'll be secure.
        swal({
          title: "Enter Password",
          text: "Enter your current password to continue.",
          type: "input",
          allowOutsideClick: true,
          showCancelButton: true,
          animation: "slide-from-top",
          inputType: "password",
          inputPlaceholder: "Enter password",
          closeOnConfirm: false
        }, function(inputValue) {
          if (inputValue === false) return false;
          if (inputValue === "") {
            swal.showInputError("Enter a password!");
            return false
          }
          if (inputValue !== password) {
            swal.showInputError("Incorrect password!");
            return false;
          }
          swal({
            title: "Change Email",
            text: "Enter a new email for your account.",
            type: "input",
            allowOutsideClick: true,
            showCancelButton: true,
            inputPlaceholder: "johndoe@example.com",
            showLoaderOnConfirm: true,
            closeOnConfirm: false
          }, function(inputValue) {
            if (inputValue === false) return false;
            if (inputValue === "") {
              swal.showInputError("Enter an email!");
              return false;
            }
            setTimeout(function(){
              // Backend for email change
              var emailChanged = true; // If the email was successfully changed or not
              if (emailChanged) {
                swal("Success!", "Your email was successfully changed to " + String(inputValue), "success");
              } else {
                swal("Error!", "Your email was not changed. If you keep experiencing this error, please contact DragonDrop Support.", "error");
              }
            }, 3000);
          });
        });
      }
       
      function changePassword() {
        var password = "this-is-a-pass"; // Just for now. When backend is implemented, it'll be secure.
        swal({
          title: "Enter Password",
          text: "Enter your current password to continue.",
          type: "input",
          allowOutsideClick: true,
          showCancelButton: true,
          animation: "slide-from-top",
          inputType: "password",
          inputPlaceholder: "Enter password",
          closeOnConfirm: false
        }, function(inputValue) {
          if (inputValue === false) return false;
          if (inputValue === "") {
            swal.showInputError("Enter a password!");
            return false
          }
          if (inputValue !== password) {
            swal.showInputError("Incorrect password!");
            return false;
          }
          swal({
            title: "Change Password",
            text: "Enter a new password for your account.",
            type: "input",
            inputType: "password",
            allowOutsideClick: true,
            showCancelButton: true,
            showLoaderOnConfirm: true
          }, function(inputValue) {
            if (inputValue === false) return false;
            if (inputValue === "") {
              swal.showInputError("Enter a password!");
              return false
            }
            setTimeout(function(){
              // Backend for email change
              var passChanged = true; // If the email was successfully changed or not
              if (passChanged) {
                swal("Success!", "Your password was successfully changed.", "success");
              } else {
                swal("Error!", "Your password was not changed. If you keep experiencing this error, please contact DragonDrop Support.", "error");
              }
            }, 3000);
          });
        });
      }
      function connectAccount() {
        // Not implemented
        swal("Error!", "This function hasn't been implemented yet.", "error");
      }
    </script>
  </head>
  <body>
    <ul>
      <li><strong><a href="https://nanomotion.github.io/a/dragondrop" target="_blank">DragonDrop</a></strong></li>
      <li><a href="https://dragon-drop-scratch.github.io/html-app/">Home</a></li>
      <li><a href="https://dragon-drop-scratch.github.io/html-app/sites.html">Sites</a></li>
      <li><a href="https://dragon-drop-scratch.github.io/html-app/account.html">Account</a></li>
      <li style="float: right;"><a href="https://dragon-drop-scratch.github.io/html-app/login">Log In</a></li>
    </ul>
    <div class="main-content">
      <center>
        <h1>My Account</h1>
        <div id="account-info">
          <h2 style="text-align: center;">Account information</h2>
          <hr>
          <h3>Email</h3>
          <p style="color: gray;">example@example.com</p>
          <br>
          <a onClick="changeEmail()">Change</a>
          <hr>
          <h3>Password</h3>
          <a onClick="changePassword()">Change password</a> | <a onClick="connectAccount()">Connect accounts</a>
          <hr>
          <h3>Profile</h3>
          <form action="social_preferences.php">
            <input type="checkbox" value="showprofile">Show my profile<br>
            <input type="checkbox" value="showsites">Show my sites<br>
            <input type="submit" value="Update Settings">
          </form>
        </div>
      </center>
    </div>
  </body>
</html>
